[tool.cibuildwheel]
build = ["cp312-*"]
manylinux-x86_64-image = "manylinux2014"
skip = ["*musllinux*"]
before-all = """
    git clone https://github.com/Restream/reindexer.git
    cd reindexer
    ./dependencies.sh
    mkdir -p build && cd build
    cmake ..
    make -j4
    make install
    cd ../..
    rm -rf reindexer/
"""
environment = { CIBUILDWHEEL = "1" }
before-build = "python -m build --sdist"

[tool.cibuildwheel.linux]
archs = ["x86_64"]

#[tool.cibuildwheel.macos]
#archs = ["x86_64"]

[build-system]
requires = [
    "setuptools",
    "wheel",
    "pybind11",
    "build"
]

build-backend = "setuptools.build_meta"